"use strict";angular.module("leseulsteve.userAuth",["ngAnimate","LocalStorageModule"]),angular.module("leseulsteve.userAuth").config(["localStorageServiceProvider","$httpProvider",function(a,b){a.setPrefix("userAuth"),b.interceptors.push(["$q","localStorageService","$rootScope",function(a,b,c){return{request:function(a){a.headers=a.headers||{};var c=b.get("token");return c&&(a.headers.Authorization="Bearer "+c),a},responseError:function(b){switch(b.status){case 401:c.$broadcast("UserAuth:request:unauthorized",b)}return a.reject(b)}}}])}]),angular.module("leseulsteve.userAuth").provider("UserAuth",function(){var a={};return{config:function(b){_.extend(a,b)},$get:["$http","localStorageService","$rootScope",function(b,c,d){return{config:a,login:function(e){return b.post(a.backend.paths.login,e).then(function(b){return c.set("token",b.data.token.id),c.set("token-expiration",b.data.token.expiration),$injector.get(a.userFactoryName).findOne(b.data.user._id).then(function(a){return d.$broadcast("UserAuth:login:success",a),a})})["catch"](function(a){d.$broadcast("UserAuth:login:fail",a.data.message)})},resetPassword:function(c){return b.post(a.backend.paths.login,{username:username,urlRedirection:a.resetPassword.urlRedirection}).then(function(a){d.$broadcast("UserAuth:resetPassword:success")})["catch"](function(a){d.$broadcast("UserAuth:resetPassword:fail",a.data.message)})}}}]}}),angular.module("leseulsteve.userAuth").directive("loginForm",["$animate","UserAuth",function(a,b){return{restrict:"A",link:function(c,d){c.login=function(c,e){c.$invalid&&b.config.loginForm.animate&&a.addClass(d,"shake").then(function(){a.removeClass(d,"shake")}),c.$valid&&b.login(e)}}}}]);
//# sourceMappingURL=leseulsteve-user-auth.min.js.map